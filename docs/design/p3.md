아래는 **“Docs 탭만 먼저 추가”**를 목표로 한 **즉시 구현 가능한 UI 골격**입니다.
범위는 **① 탭 추가 → ② Voyage Selector → ③ 카테고리/리스트 렌더링**까지이며, **저장/승인/마감 계산은 스텁**으로 둡니다.
(현 구조: `components/gantt-preview.tsx`에 4개 탭 존재 — 여기에 **Docs**를 5번째로 추가)

---

## Stage 0. 목표·가정

**목표**

* 기존 **GanttPreview**에 **Docs** 탭 추가
* **Voyage 선택 1회**로 문서 목록이 바뀌는 UI 골격
* **카테고리(PTW / Loading / NOC)** + **문서 리스트**만 렌더

**가정**

* Voyage는 현재 Trip 그룹(AGI TR Units 1–2, 3–4, 5–6, 7)과 1:1 매핑
* 문서 항목은 기존 HTML 체크리스트를 **정적 템플릿**으로 우선 반영

---

## Stage 1. 탭 추가 (GanttPreview)

**파일**: `components/gantt-preview.tsx`
**변경**: TabsTrigger/TabsContent에 `docs` 추가

```tsx
// (발췌) 기존 Tabs Header
<TabsList>
  <TabsTrigger value="gantt">Gantt Chart</TabsTrigger>
  <TabsTrigger value="table">Table View</TabsTrigger>
  <TabsTrigger value="voyage">Voyage</TabsTrigger>
  <TabsTrigger value="summary">Summary</TabsTrigger>
  <TabsTrigger value="docs">Docs</TabsTrigger> {/* 신규 */}
</TabsList>

// Tabs Content
<TabsContent value="docs" className="flex-1 min-h-0">
  <DocsTab scheduleData={scheduleData} />
</TabsContent>
```

> **주의**: DocsTab은 **client component**로 구현(상호작용).

---

## Stage 2. Docs 탭 UI 골격

### 2.1 컴포넌트 파일

* **신규**: `components/docs/docs-tab.tsx`

```tsx
"use client";

import { useMemo, useState } from "react";
import { Card } from "@/components/ui/card";
import { Tabs, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import { ScrollArea } from "@/components/ui/scroll-area";
import type { ScheduleData } from "@/lib/types";

import { DOC_CATEGORIES, DOC_TEMPLATES, deriveVoyages } from "./docs.data";

type Props = { scheduleData: ScheduleData | null };

export default function DocsTab({ scheduleData }: Props) {
  const voyages = useMemo(() => deriveVoyages(scheduleData), [scheduleData]);
  const [voyageId, setVoyageId] = useState(voyages[0]?.id ?? "");
  const [categoryId, setCategoryId] = useState(DOC_CATEGORIES[0].id);
  const [q, setQ] = useState("");

  const docs = useMemo(() => {
    return DOC_TEMPLATES
      .filter(d => d.categoryId === categoryId)
      .filter(d => d.title.toLowerCase().includes(q.toLowerCase()));
  }, [categoryId, q]);

  return (
    <div className="h-full flex gap-4 p-4">
      {/* LEFT: Category */}
      <Card className="w-64 p-3 flex flex-col">
        <div className="text-xs font-semibold mb-2">Categories</div>
        <Tabs value={categoryId} onValueChange={setCategoryId} className="flex-1">
          <TabsList className="flex-col items-stretch h-auto">
            {DOC_CATEGORIES.map(c => (
              <TabsTrigger key={c.id} value={c.id} className="justify-between">
                <span>{c.label}</span>
                <Badge variant="secondary">{c.count}</Badge>
              </TabsTrigger>
            ))}
          </TabsList>
        </Tabs>
      </Card>

      {/* RIGHT: List */}
      <Card className="flex-1 p-4 flex flex-col">
        {/* Header */}
        <div className="flex items-center gap-3 mb-3">
          <Select value={voyageId} onValueChange={setVoyageId}>
            <SelectTrigger className="w-56">
              <SelectValue placeholder="Select Voyage" />
            </SelectTrigger>
            <SelectContent>
              {voyages.map(v => (
                <SelectItem key={v.id} value={v.id}>
                  {v.label}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>

          <Input
            placeholder="Search documents…"
            value={q}
            onChange={e => setQ(e.target.value)}
            className="max-w-xs"
          />
        </div>

        {/* List */}
        <ScrollArea className="flex-1">
          <ul className="space-y-2">
            {docs.map(d => (
              <li key={d.id} className="flex items-start gap-3 rounded-lg border p-3">
                <input type="checkbox" aria-label={d.title} />
                <div className="flex-1">
                  <div className="text-sm font-medium">{d.title}</div>
                  {d.desc && <div className="text-xs text-muted-foreground">{d.desc}</div>}
                </div>
                <Badge variant={d.priority === "critical" ? "destructive" : "secondary"}>
                  {d.priority}
                </Badge>
              </li>
            ))}
          </ul>
        </ScrollArea>
      </Card>
    </div>
  );
}
```

---

## Stage 3. 데이터 스텁 (카테고리 / 문서 / Voyage 파생)

### 3.1 데이터 파일

* **신규**: `components/docs/docs.data.ts`

```ts
import type { ScheduleData } from "@/lib/types";

export const DOC_CATEGORIES = [
  { id: "ptw", label: "PTW Submission Pack", count: 13 },
  { id: "loading", label: "Loading Cargo Docs", count: 4 },
  { id: "noc", label: "AD Maritime NOC", count: 6 },
];

export const DOC_TEMPLATES = [
  // PTW (예시 일부)
  { id: "ptw-1", categoryId: "ptw", title: "Risk Assessment", desc: "AD Port format", priority: "critical" },
  { id: "ptw-2", categoryId: "ptw", title: "PTW Consent Form", priority: "critical" },
  { id: "ptw-13", categoryId: "ptw", title: "Tide Window Confirmation", priority: "critical" },

  // Loading
  { id: "load-a", categoryId: "loading", title: "Cargo Manifest", priority: "important" },
  { id: "load-d", categoryId: "loading", title: "Load Sequence", priority: "important" },

  // NOC
  { id: "noc-1", categoryId: "noc", title: "Local Trading License", priority: "critical" },
  { id: "noc-4", categoryId: "noc", title: "Voyage Plan (MZP→AGI)", priority: "critical" },
] as const;

export function deriveVoyages(scheduleData: ScheduleData | null) {
  if (!scheduleData) return [];
  // activityId2(Trip) 기준으로 Voyage 파생
  const trips = Array.from(new Set(scheduleData.tasks.map(t => t.activityId2)));
  return trips.map((t, i) => ({
    id: `V${i + 1}`,
    label: `Voyage ${i + 1} – ${t}`,
  }));
}
```

> 이 데이터는 **Gate Pass & Customs HTML**의 카테고리/항목을 그대로 반영한 스텁입니다.

---

## Stage 4. 접근성·성능 체크

* **접근성**:

  * 체크박스에 `aria-label` 제공
  * Tabs/Select는 Radix(shadcn) 기본 키보드 내비게이션 보장
* **성능**:

  * Docs 탭은 **lazy 렌더**(탭 진입 시)
  * 대용량 리스트 대비 `ScrollArea` 사용
  * 서버 연동 전까지 **클라이언트 스텁**만 사용 (워터폴 없음)

---

## Stage 5. 검증 기준 (MVP)

* [ ] GanttPreview에 **Docs 탭** 정상 노출
* [ ] Voyage 변경 시 리스트 유지(컨텍스트 전환)
* [ ] 카테고리 전환/검색 즉시 반영
* [ ] 모바일/컴팩트 모드에서 스크롤 정상

**Feasibility**: **Pass**

---

## 다음 단계(옵션)

1. **문서 상태 머신**(not_started → submitted → approved) 연결
2. **마감(D-4/D-3) 계산**을 Voyage 마일스톤과 연동
3. **첨부/히스토리 패널**(Sheet/Drawer) 추가
4. **서버 저장**(Vercel Postgres) 전환

원하시면, 위 스텁을 **실제 `doc-templates.json` + 상태 머신(XState) + 마감 계산(date-fns)**까지 확장해 드리겠습니다.
